<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{margin: 0;padding: 0;border: 0;}
		div{width: 200px;height: 200px;background-color:red;position: absolute;left: 0;top: 0;}
	</style>
</head>
<body>
	<div></div>
	<script type="text/javascript">
		window.onload = function(){

			var drag = new global()
			drag.Down()
		}
		function global(){
		
			this.oDiv = document.getElementsByTagName('div')[0]
			this.disX = 0
			this.disY = 0
		}
		global.prototype = {
				Down : function(){
						var This = this
						this.oDiv.onmousedown = function(ev){
							var ev = ev || window.event
							This.disX = ev.clientX - This.oDiv.offsetLeft
							This.disY = ev.clientY - This.oDiv.offsetTop
								This.Move(this)
								This.Up(this)
						}
					 },
				Move : function(obj){
						var This =this
						document.onmousemove = function(ev){
							var ev = ev || window.event
							//X轴的判断
							if( ev.clientX - This.disX < 0 ){
								This.oDiv.style.left = 0
							}
							else if( ev.clientX > document.documentElement.clientWidth -(This.oDiv.offsetWidth -  This.disX)){
								This.oDiv.style.left = document.documentElement.clientWidth - This.oDiv.offsetWidth + 'px'
							}else{
								This.oDiv.style.left = ev.clientX - This.disX + 'px'
							}
							//Y轴的判断
							if( ev.clientY - This.disY < 0){
								This.oDiv.style.top = 0
							}else if( ev.clientY > document.documentElement.clientHeight - ( This.oDiv.offsetHeight - This.disY )){
								This.oDiv.style.top = document.documentElement.clientHeight - This.oDiv.offsetHeight + 'px'
							}else{
								This.oDiv.style.top = ev.clientY - This.disY + 'px'
							}
						}
					 },
				Up   : function(obj){
						var This = obj
 						document.onmouseup = function(){
 							document.onmousemove = null
 							document.onmouseup = null
 						}

					 }
		}
	</script>
</body>
</html>